<p-toast position="top-right" [life]="5000" styleClass="p-toast-vetflow"></p-toast>

<!-- Main Card Container -->
<div class="w-full max-w-md relative z-10">
  <p-card [style]="{ overflow: 'hidden' }" styleClass="sm:w-[26.25rem]" class="shadow-2xl border-0 overflow-hidden backdrop-blur-sm bg-white/95">

    <!-- Header Section with Logo -->
    <ng-template pTemplate="header">
      <div class="flex flex-col items-center pt-8 px-6 bg-gradient-to-br from-orange-500 to-amber-500">
        <!-- Mobile: 4rem (w-16), Desktop: 5rem (w-20) -->
        <div class="w-16 h-16 sm:w-24 sm:h-24 bg-white rounded-full flex items-center justify-center shadow-lg mb-4">
          <img src="assets/images/VetFlow.png" alt="VetPathWay Logo" class="w-10 h-10 sm:w-20 sm:h-20 object-contain" />
        </div>
        <!-- Mobile: text-2xl (1.5rem), Desktop: text-3xl -->
        <h2 class="text-2xl sm:text-3xl font-bold text-white mb-2">Welcome Back</h2>
        <p class="text-orange-50 text-center text-sm">Sign in to continue to VetPathWay.Net</p>
      </div>
    </ng-template>

    <!-- Login Form Content -->
    <div class="p-8">
      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="loginForm flex flex-col space-y-6">

        <!-- Email Input -->
        <div class="flex flex-col gap-2">
          <label for="email" class="text-sm font-semibold text-gray-700">
            Email Address
          </label>
          <span class="p-input-icon-left w-full">
            <i class="pi pi-envelope text-gray-400"></i>
            <input pInputText
                   id="email"
                   name="email"
                   type="email"
                   autocomplete="on"
                   formControlName="email"
                   autocomplete="username"
                   placeholder="you@example.com"
                   class="p-inputtext-vetflow w-full pl-10 pr-4 py-3 rounded-lg border-2 border-gray-200 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-all duration-200" />
          </span>

          @if (this.email?.invalid && (this.email?.touched || this.email?.dirty)) {
          <div>
            @if(email?.hasError('required')) {
            <p-message severity="error"
                       text="Email is required"
                       styleClass="text-xs"></p-message>
            }

            @if(email?.hasError('email')) {
            <p-message severity="error"
                       text="Invalid email format"
                       styleClass="text-xs"></p-message>
            }
          </div>
          }
    </div>

        <!-- Password Input -->
        <div class="flex flex-col gap-2">
          <label for="password" class="text-sm font-semibold text-gray-700">
            Password
          </label>
          <span class="p-input-icon-left w-full">
            <i class="pi pi-lock text-gray-400 inline-block"></i>
            <p-password [toggleMask]="true" [feedback]="false"
                        formControlName="password"
                        id="password"
                        name="password"
                        type="password"
                        placeholder="Enter your password"
                        autocomplete="current-password"
                        styleClass="w-full"
                        class="p-password-vetflow"
                        inputStyleClass="w-full pl-10 pr-4 py-3 rounded-lg border-2 border-gray-200 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-all duration-200" />
          </span>
          @if (this.password?.invalid && (this.password?.touched || this.password?.dirty)) {
          <div>
            @if(password?.hasError('required')) {
            <p-message severity="error"
                       text="Password is required"
                       styleClass="text-xs"></p-message>
            } @else {
            <p-message severity="error"
                       text="Password is invalid"
                       styleClass="text-xs"></p-message>
            }
          </div>
          }
        </div>

        <!-- Remember Me & Forgot Password -->
        <div class="flex flex-wrap justify-center sm:justify-between gap-2">
          <div class="flex w-full sm:w-auto justify-center" sm:justify-start>
            <p-checkbox formControlName="rememberMe"
                        [binary]="true"
                        inputId="remember"
                        styleClass="text-sm text-gray-600"></p-checkbox>
            <label for="remember" class="ml-2 text-sm">Remember me</label>
          </div>

          <a href="#" (click)="onForgotPassword($event)"
             class="w-full sm:w-auto text-center sm:text-left text-sm  font-medium text-orange-600 hover:text-orange-700 hover:underline transition-colors duration-200">
            Forgot password?
          </a>
        </div>

        <!-- Submit Button -->
        <p-button type="submit"
                  label="Sign In"
                  icon="pi pi-sign-in"
                  [loading]="isLoading"
                  [disabled]="loginForm.invalid || isLoading"
                  styleClass="w-full justify-center py-3 px-4 bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 text-white font-semibold rounded-lg shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200">
        </p-button>
      </form>

      <!-- Divider -->
      <p-divider align="center" styleClass="my-6">
        <span class="inline-block text-xs text-gray-500 bg-white px-3">OR CONTINUE WITH</span>
      </p-divider>

      <!-- Social Login Buttons -->
      <div class="grid grid-cols-2 gap-3">
        <p-button label="Google"
                  icon="pi pi-google"
                  [outlined]="true"
                  severity="secondary"
                  (onClick)="socialLogin('google')"
                  styleClass="w-full justify-center py-2.5 border-2 border-gray-200 hover:border-orange-300 hover:bg-orange-50 text-gray-700 font-medium rounded-lg transition-all duration-200">
        </p-button>

        <p-button label="Microsoft"
                  icon="pi pi-microsoft"
                  [outlined]="true"
                  severity="secondary"
                  (onClick)="socialLogin('microsoft')"
                  styleClass="w-full justify-center py-2.5 border-2 border-gray-200 hover:border-orange-300 hover:bg-orange-50 text-gray-700 font-medium rounded-lg transition-all duration-200">
        </p-button>
      </div>
    </div>

    <!-- Footer -->
    <ng-template pTemplate="footer">
      <div class="text-center px-6">
        <p class="text-sm text-gray-600">
          Don't have an account?
          <a href="create-account" class="font-semibold text-orange-600 hover:text-orange-700 hover:underline ml-1 transition-colors duration-200 whitespace-nowrap">
            Create Account
          </a>
        </p>
      </div>
    </ng-template>
  </p-card>

  <!-- Additional Info -->
  <div class="mt-6 text-center">
    <p class="text-xs text-gray-500">
      Protected by reCAPTCHA and subject to the
      <a href="privacy-policy" class="text-orange-600 hover:underline">Privacy Policy</a> and
      <a href="terms-of-service" class="text-orange-600 hover:underline">Terms of Service</a>
    </p>
  </div>
